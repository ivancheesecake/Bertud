<!doctype html>
<html>
<head>
	<title>BERTUD: Building Footprint Extraction and Regularization Through Utilization of a Distributed Computing System</title>

	<!-- Fonts -->
	<style>

	@font-face {
		  font-family: "Roboto";
		  src: local(Roboto Thin), url("{{url_for('static',filename='Roboto-Thin.eot')}}");
		  src: url("{{url_for('static',filename='Roboto-Thin.eot')}}?#iefix") format("embedded-opentype"), url("{{url_for('static',filename='Roboto-Thin.woff2')}}") format("woff2"), url("{{url_for('static',filename='Roboto-Thin.woff')}}") format("woff"), url("{{url_for('static',filename='Roboto-Thin.ttf')}}") format("truetype");
		  font-weight: 200;
		}
		
		@font-face {
		  font-family: "Roboto Light";
		  src: local(Roboto Light), url("{{url_for('static',filename='Roboto-Light.eot')}}");
		  src: url("{{url_for('static',filename='Roboto-Light.eot')}}?#iefix") format("embedded-opentype"), url("{{url_for('static',filename='Roboto-Light.woff2')}}") format("woff2"), url(".{{url_for('static',filename='Roboto-Light.woff')}}") format("woff"), url(".{{url_for('static',filename='Roboto-Light.ttf')}}") format("truetype");
		  font-weight: 300;
		}
		
		@font-face {
		  font-family: "Roboto Regular";
		  src: local(Roboto Regular), url("{{url_for('static',filename='Roboto-Regular.eot')}}");
		  src: url("{{url_for('static',filename='Roboto-Regular.eot')}}?#iefix") format("embedded-opentype"), url("{{url_for('static',filename='Roboto-Regular.woff2')}}") format("woff2"), url("{{url_for('static',filename='Roboto-Regular.woff')}}") format("woff"), url("{{url_for('static',filename='Roboto-Regular.ttf')}}") format("truetype");
		  font-weight: 400;
		}

		@font-face {
		  font-family: "Roboto Medium";
		  src: url("{{url_for('static',filename='Roboto-Medium.eot')}}");
		  src: url("{{url_for('static',filename='Roboto-Medium.eot')}}?#iefix") format("embedded-opentype"), url("../font/roboto/Roboto-Medium.woff2") format("woff2"), url("../font/roboto/Roboto-Medium.woff") format("woff"), url("../font/roboto/Roboto-Medium.ttf") format("truetype");
		  font-weight: 500;
		}

		@font-face {
		  font-family: "Roboto Bold";
		  src: url("{{url_for('static',filename='Roboto-Bold.eot')}}");
		  src: url("{{url_for('static',filename='Roboto-Bold.eot')}}?#iefix") format("embedded-opentype"), url("{{url_for('static',filename='Roboto-Bold.woff2')}}") format("woff2"), url("{{url_for('static',filename='Roboto-Bold.woff')}}") format("woff"), url("{{url_for('static',filename='Roboto-Bold.ttf')}}") format("truetype");
		  font-weight: 700;
		}
	</style>

	<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='materialize.css')}}" />
	<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/style.css')}}?q=1280549780" />
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body>


		<nav>
			<div class="nav-wrapper blue darken-4">
				<a href="#" class="brand-logo">

					<img id="navbar-icon" src="{{url_for('static',filename='logo-5.png')}}"/>
					<!-- <span style="margin-top:5px;">Bertud</span> -->
				</a>
			</div> 
		</nav>

		<div class="row" id="main">
			<div id="left" class="col s4 m4 l3 z-depth-2">
				<div class="row">
					<div class="col s12" id="tab-container">
						<ul class="tabs">
				        <li class="tab col s3"><a class="active blue-text" href="#files">Add Files</a></li>
				        <li class="tab col s3"><a href="#queue" class=" blue-text">Queue</a></li>
				         <div class="indicator blue" style="z-index:1"></div>
				      </ul>

					</div>
					<div id="files" class="col s12">
					 	 <ul class="collapsible" data-collapsible="accordion">
						    <li>
						      <div class="collapsible-header"><i class="material-icons">insert_drive_file</i>Select LAS/LAZ Files to be Processed</div>
						      <div class="collapsible-body">
								<div class="row">
									<div class="col s11 m11 l11">
										<div class="input-field">
											<input id="source-folder" type="text" class="validate">
											<label for="source-folder">Source Folder</label>
										</div>
									</div>
									<div class="col s1 m1 l1">
										<!--  <button class="btn waves-effect waves-light btn-small" type="submit" name="action">Go
										  </button> -->

										 <a class="btn-floating btn-small waves-effect waves-light red"><i class="material-icons">folder_open</i></a>  
									</div>
								</div>    
						      </div>
						    </li>
						    <li>
						      <div class="collapsible-header"><i class="material-icons">folder</i>Select Output Folder</div>
						      <div class="collapsible-body">

						      	<div class="row">
									<div class="col s11 m11 l11">
										<div class="input-field">
											<input id="dest-folder" type="text" class="validate">
											<label for="dest-folder">Destination Folder</label>
										</div>
									</div>

								</div>

						      </div>
						    </li>
						    <li>
						      <div class="collapsible-header"><i class="material-icons">settings</i>Advanced Settings</div>
						      <div class="collapsible-body"><p>Lorem ipsum dolor sit amet.</p></div>
						    </li>
						  </ul>

					 </div>
   					 <div id="queue" class="col s12">Test 2</div>

				</div>
			</div>	

			<div id="right"class="col s8 m8 l9">

				<div class="row">
					<div class="col s12 m4 l4">
						<div id="pc-1" class="card small">
							<div class="card-image waves-effect waves-block waves-light">
								 <!-- <img class="activator" src="{{url_for('static',filename='test.png')}}"> -->
								 <div id="panel-pc1" class="activator pc-panel red lighten-1">

								 	<div class="row ">
								 		<div class="col s5 m5 l5">
								 			<i class="material-icons pc-icon">desktop_mac</i>
								 		</div>

								 		<div class="col s7 m7 l7 pc-status">
								 			<p id="status-pc1" class="status">
								 				Status: Ready
								 			</p>
								 			<p id="cpu-pc1" class="cpu">
								 				CPU: 22%
								 			</p>
								 			<p id="ram-pc1" class="ram">
								 				RAM: 12%
								 			</p>
								 		</div>
								 	</div>
								 </div>
							</div>

							<div class="card-content">
								<span class="card-title activator grey-text text-darken-4">Cheesecake-PC<i class="material-icons right card-icon">more_vert</i></span>
							</div>
							<div class="card-reveal">
							<span class="card-title grey-text text-darken-4">Cheesecake-PC<i class="material-icons right ">close</i></span>
							<p>Here is some more information about this product that is only revealed once clicked on.</p>
							</div>
						</div>
					</div>
				</div>

			</div>

		</div>

	<script type="text/javascript" src="{{url_for('static',filename='jquery-1.12.0.min.js')}}"></script>
	<script type="text/javascript" src="{{url_for('static',filename='materialize.min.js')}}"></script>

	<script type="text/javascript">

	// Initialize UI

	$(document).ready(function() {

		$('select').material_select();
		$("#main").height($(window).height()-64);
		// $("#queue-content").height($(window).height()-200);
		$(".collapsible-body").css('max-height',$(window).height()-300);

	});

	// Initialize Services

	$(document).ready(function() {
		
		// Make this a loop for later

		$("#cpu-pc1").hide();
		$("#ram-pc1").hide();

		setInterval(function(){

			$.ajax({
				url: 'http://127.0.0.1:5000/listen',
				type: 'GET',
				success: function(resp){
					console.log(resp['1'].cpu,resp['1'].ram);
					update_pcs(resp);

				}
				});
			}, 5000);


	});
		
	function update_pcs(obj){

		$.each(obj, function(index,o){

			if(o.status==0 || o.cpu==-1){

				$("#status-pc"+index).html("Status: Disconnected");
				$("#panel-pc"+index).addClass('red')
				$("#panel-pc"+index).removeClass('green')

				$("#cpu-pc"+index).hide();
				$("#ram-pc"+index).hide();
			}

			else{

				if(o.status==1){
					$("#status-pc"+index).html("Status: Ready");
					$("#panel-pc"+index).addClass('green')
					$("#panel-pc"+index).removeClass('red')
				}
				else if(o.status==2){
					$("#status-pc"+index).html("Status: Processing");

				}

				$("#cpu-pc"+index).show()
				$("#ram-pc"+index).show()
				$("#cpu-pc"+index).html("CPU: "+o.cpu+"%");
				$("#ram-pc"+index).html("RAM: "+o.ram+"%");
			}	
		});


	}

	$('#btn-add').click(function(event) {
		alert("HERE");
	});	


	</script>
</body>



</html>